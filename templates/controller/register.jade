extends ../skel


block vars
  - var pageTitle = '新用户注册'


block content
  form.register-form(
    name='registerForm'
    novalidate='novalidate'
    data-ng-controller='Register'
    )
    h1.form__title 注册一个江南听雨网帐号

    section.form__section
      h2.form__section__title 身份验证

      input(
        type='text'
        name='number'
        required='required'
        placeholder='您的学号'
        data-ng-model='number'
        data-ng-pattern='/^[0-9]{10}$/'
        )

      input(
        type='text'
        name='idnumber'
        required='required'
        placeholder='身份证后六位'
        data-ng-model='idnumber'
        data-ng-pattern='/^[0-9Xx]{6}$/'
        )

      .ident-check-result(
        data-ng-switch='!!identInfo'
        )
        .ident-check-passed(data-ng-switch-when='true')
          span.ident__name {{identInfo.name}}
          span.ident__school {{identInfo.school}}
          span.ident__major {{majorsInfo[identInfo.major].name}}
          span.ident__klass {{identInfo.year % 100}}{{zeropad(identInfo.klass)}}班

        .ident-check-fail(data-ng-switch-when='false')
          span.ident__retcode {{identCheckMsg}}

    section.form__section
      h2.form__section__title 住宿信息

      .dorm-info-container(data-ng-switch='!!identInfo')
        .dorm-info(data-ng-switch-when='true')
          select.dorms__group(data-ui-select2, data-ng-model='dormGroup', data-placeholder='您所在的园区')
            option(value='')
            option(data-ng-repeat='groupName in dormGroups[identInfo.gender]', value='{{$index}}') {{groupName}}

          select.dorms__building(data-ui-select2, data-ng-model='dormBuilding', data-placeholder='您居住的楼号')
            option(value='')
            option(data-ng-repeat='bldgNum in dormByGender[identInfo.gender][dormGroups[identInfo.gender][dormGroup]]' value='{{bldgNum}}') {{bldgNum}}

        .dorm-info-hidden(data-ng-switch-when='false')
          // TODO: 公共的成功/失败信息提示框组件
          p 请在通过身份验证之后设置住宿信息。


// vim:set ai et ts=2 sw=2 sts=2 fenc=utf-8:
