doctype html
html#appmount(lang='cmn')
  block vars
  head
    meta(charset='utf-8')

    // 既然 oldIE 全都被中间件封杀了, 这一条声明就没有受众了, 还会让文档过不了 HTML5 校验...
    // meta(http-equiv='X-UA-Compatible', content='IE=edge')

    title #{pageTitle} - 江南听雨网

    meta(name='description', content='')
    meta(name='viewport', content='width=device-width, initial-scale=1.0, minimum-scale=0.5 maximum-scale=1.0')
    meta(name='apple-mobile-web-app-capable', content='yes')
    meta(name='apple-mobile-web-app-status-bar-style', content='black-translucent')

    link(rel='icon', type='image/x-icon', href='/static/img/favicon.ico')

    link(rel='stylesheet', href='/static/vendored/vendored.css')
    link(rel='stylesheet', href='/static/css/app.css')

    script(src='/static/vendored/socket.io.js')
    script(src='/static/js/bundle.js')

  body
    #wrap
      #wrap__main
        header
          .pagehdr__logo.jnrain-logo
          .pagehdr__nav-container
            nav.pagehdr__nav
              include nav
        .main-container
          block content

        toaster-container.toast-container

    footer#wrap__footer
      block footer

      .footer__content
        p &copy; 2014 江南听雨网.

        .footer__debug(data-ng-controller='DebugFooter')
          dl.debug__items
            dt.debug__item__title 组件版本
            dd.debug__item
              ul.footer__versions
                li.footer__versions__item weiyu
                  span.footer__versions__item__rev {{versions.weiyu}}
                li.footer__versions__item luohua
                  span.footer__versions__item__rev {{versions.luohua}}
                li.footer__versions__item jnrain-web
                  span.footer__versions__item__rev #{VER_GIT}

            dt.debug__item__title 部署频道
            dd.debug__item.debug__channel #{DEPLOY_CHANNEL_NAME}

            dt.debug__item__title 实时信道
            dd.debug__item(data-ng-controller='RTChannelManager')
              .debug__rt__status {{rtStatus}}
                span.debug__rt__sid(data-ng-show='!!rtSID') ; rtSID={{rtSID}}
                span.debug__rt__retries(data-ng-show='rtStatus == "reconnecting"') ; retries={{rtConnectionRetries}}

    if DEBUG_LIVERELOAD
      // grunt-watch 的 LiveReload 貌似只有 HTTP 版...
      // 不过因为这一条反正不会出现在生产页面上, 所以无所谓的
      script(src='http://localhost:35729/livereload.js')


// vim:set ai et ts=2 sw=2 sts=2 fenc=utf-8:
